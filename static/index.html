<html>
    <head>
        <title>Чат</title>
        <link rel="stylesheet" href="..\src\index.css">
        <link href="https://fonts.googleapis.com/css2?family=Raleway" rel="stylesheet">
    </head>
    <body>
        <main class="chat">
            <div class="chat-contacts-panel">
                <a class="my-profile-link" href="profile.html">Профиль</a>
                <div class="search-field-wrapper">
                    <input type="search" class="search-chat-contact" placeholder="Поиск">
                </div>
                <div class="wrapper-chat-contacts-list scrollbar-style">
                    <ul class="chat-contacts-list">
                        <li class="tab"><a class="tab-link avatar1" href="#">Лена</a></li>
                        <li class="tab active"><a class="tab-link avatar2" href="#">Илья</a></li>
                        <li class="tab"><a class="tab-link avatar3" href="#">Хористка Наташа</a></li>
                        <li class="tab"><a class="tab-link avatar4" href="#">Design Destroyer</a></li>
                        <li class="tab"><a class="tab-link avatar5" href="#">Андрей</a></li>
                        <li class="tab"><a class="tab-link avatar6" href="#">Мама</a></li>
                        <li class="tab"><a class="tab-link avatar7" href="#">Родня из Екатеринбурга</a></li>
                        <li class="tab"><a class="tab-link avatar8" href="#">Стив Тайлер</a></li>
                        <li class="tab"><a class="tab-link avatar9" href="#">Дискуссионный клуб</a></li>
                        <li class="tab"><a class="tab-link avatar10" href="#">Бойцовский клуб</a></li>
                        <li class="tab"><a class="tab-link avatar11" href="#">Тайное общество</a></li>
                    </ul>
                </div>
            </div>
            <section class="content">
              <div class="contact-info">
                <div class="contact-avatar avatar2"></div>
                <span class="contact-name">Илья</span>
              </div>
              <div class="messages-dashboard scrollbar-style">
                <div class="message user-message"><p>Подёрнутое туманной дымкой солнце клонилось за горизонт, там, на 
                западном краю небосвода, чуть пониже огромного тёмного облака – сейчас оно было похоже на голову, - 
                зияла широкая, червонного золота, резаная рана.
                </p></div>
                <div class="message contact-message"><p> “Вот оно, з-знамение! Само небо пред-достерегает!.. 
                Воистину, не сносить мне г-головы, если вылезу из-под од-деяла, - причитал, стуча зубами, человек
                 (очень уж он простуды боялся, и чем дальше, тем больше). – Н-на ночь глядя и зелёный юнец – хлебнул
                  бы он с моё! – поостережётся высовывать нос на улицу-цу…”
                </p></div>
                <div class="message contact-message"><p>И он обречённо уставился на туманную дымку, нижний край которой, 
                насквозь пропитанный закатной кровью, вселял в его разочарованную душу смутную тревогу.
                </p></div>
                <div class="message user-message"><p>Тёмное облако между тем быстро меняло свои очертания, становясь 
                каким-то перистым, лёгким, стремительным… Крыло на взмахе, да и только!.. Всё дальше уносилось оно на запад…
                И тут в мозг человека стало вкрадчиво вползать что-то мягкое, округлое – нежный пушок плесени скрывал истинную
                его форму, но, похоже, это было воспоминание, таившееся до сих пор в глубине сознания, в какой-то укромной и 
                сырой норе… Воспоминание об одном сне… А приснился ему тогда ворон, который высиживал человеческие сердца.
                </p></div>
                <div class="message contact-message"><p> Эта чёрная птица ещё преследовала его всю ночь, и, как он ни старался, 
                прогнать наваждение не мог… Да, да, так оно и было, теперь он точно припомнил.
                </p><img src="https://pics.livejournal.com/max_verg/pic/00001k5d/s320x240"></div>
                <div class="message user-message"><p>“Необходимо во что бы то ни стало выяснить, кому принадлежит это крыло”, - 
                сказал себе человек, поднялся с постели и сошёл по лестнице на улицу… Так он брёл в одной ночной рубашке, босиком, 
                стараясь не терять из виду зловещее крыло, которое улетало всё дальше на запад…
                </p></div>
              </div>
              <div class="new-message-wrapper">
                <form class="new-message-form" id="new-message-form" action="" method="post" enctype="multipart/form-data">
                    <label for="file-upload" class="custom-file-upload">
                        <img src="../src/img/add_file.svg">
                    </label>
                    <input id="file-upload" type="file"/>
                    <div class="new-message-field-wrapper">
                        <textarea class="new-message-textarea" rows="1" autofocus minlength="1" form="new-message-form" name="message" placeholder="Сообщение"></textarea>
                    </div>
                    <label for="send-new-message" class="custom-send-button" aria-autocomplete="none">
                        <img src="../src/img/send-comment.svg">
                    </label>
                    <input type="submit" name="sendMessage" id="send-new-message">
                </form>
              </div>
            </section>
        </main>
        <script>
            let chatContactsList = document.querySelector(".wrapper-chat-contacts-list");
            chatContactsList.onmouseenter = function(){
                chatContactsList.classList.add("showScrollbar");
            }            
            chatContactsList.onmouseleave = function(){
                chatContactsList.classList.remove("showScrollbar");
            }
            
            let tabs = document.querySelectorAll(".tab");
            tabs.forEach(tab => {
                tab.onclick = function(){
                    let prevActTab = document.querySelector(".active");
                    tab.classList.add("active");
                    if (prevActTab)
                        prevActTab.classList.remove("active");
                }
            });

            let textarea = document.querySelector('.new-message-textarea');
            textarea.addEventListener('keyup', function(e){
                let styles = getComputedStyle(textarea);
                this.style.height = 0;
                let minHeightArea = parseInt(styles.minHeight);
                let newHeight = this.scrollHeight;
                this.style.height = (newHeight > minHeightArea)?newHeight:minHeightArea + 'px';
            });
        </script>
    </body>
</html>